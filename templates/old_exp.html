


<!--<!DOCTYPE html>
&lt;!&ndash;
  The experiment.html is the main form that
  controls the experiment.


  see comments throughout for advice
&ndash;&gt;
<html>
<head>
    <meta charset="UTF-8">
    <title>UC Irvine - Learning and Decision Neuroscience Laboratory</title>
    <link rel="icon" href="/static/favicon.ico" />

        &lt;!&ndash; libraries used in your experiment
			psiturk specifically depends on underscore.js, backbone.js and jquery
    	&ndash;&gt;
        <script src="/static/lib/jquery-min.js" type="text/javascript"> </script>
        <script src="/static/lib/underscore-min.js" type="text/javascript"> </script>
        <script src="/static/lib/backbone-min.js" type="text/javascript"> </script>
        <script src="/static/lib/d3.v3.min.js" type="text/javascript"> </script>

        <script src="/static/js/jspsych/jspsych.js" type="text/javascript"></script>
        <script src="/static/js/jspsych/plugins/jspsych-html-keyboard-response.js"></script>
        <script src="/static/js/jspsych/plugins/jspsych-image-button-response.js"></script>
        <script src="/static/js/jspsych/plugins/jspsych-call-function.js" type="text/javascript"></script>
        <script src="/static/js/jspsych/plugins/jspsych-image-keyboard-response.js" type="text/javascript"></script>
        <script src="/static/js/jspsych/plugins/jspsych-external-html.js"></script>
        <script type="text/javascript" src="/static/js/jspsych/plugins/jspsych-fullscreen.js"></script>
        <script type="text/javascript" src="/static/js/jspsych/plugins/jspsych-instructions.js"></script>

        <script type="text/javascript">
        // These fields provided by the psiTurk Server
        var uniqueId = "{{ uniqueId }}";  // a unique string identifying the worker/task
        var condition = "{{ condition }}"; // the condition number
        var counterbalance = "{{ counterbalance }}"; // a number indexing counterbalancing conditions
        var adServerLoc = "{{ adServerLoc }}"; // the location of your ad (so you can send user back at end of experiment)
        var mode = "{{ mode }}";

    </script>

    &lt;!&ndash; utils.js and psiturk.js provide the basic psiturk functionality &ndash;&gt;
    <script src="/static/js/utils.js" type="text/javascript"> </script>
    <script src="/static/js/psiturk.js" type="text/javascript"> </script>


    &lt;!&ndash; old_task.js is where you experiment code actually lives
        for most purposes this is where you want to focus debugging, development, etc...
    &ndash;&gt;
    <script src="../static/js/old_task.js" type="text/javascript"> </script>

    <link rel="stylesheet" href="/static/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="/static/css/style.css" type="text/css" />
    <link rel="stylesheet" href="/static/css/jspsych.css" type="text/css" />


</head>
<body>
<noscript>
    <h1>Warning: Javascript seems to be disabled</h1>
    <p>This website requires that Javascript be enabled on your browser.</p>
    <p>Instructions for enabling Javascript in your browser can be found
        <a href="http://support.google.com/bin/answer.py?hl=en&answer=23852">here</a></p>
</noscript>
</body>
</html>-->


<!--/* Gary Consensus */-->

  <!DOCTYPE html>
<html>
<head>
    <title>My experiment</title>
    <script src="jsPsych/jspsych.js"></script>
    <script src="jsPsych/plugins/jspsych-html-keyboard-response.js"></script>
    <script src="jsPsych/plugins/jspsych-image-keyboard-response.js"></script>
    <script src="jsPsych/plugins/jspsych-image-button-response.js"></script>
    <script src="jsPsych/plugins/jspsych-preload.js"></script>
    <link href="jsPsych/css/jspsych.css" rel="stylesheet" type="text/css">
</head>
<body></body>
<script>


    var timeline = [];

    var images = ['images_cons/arrow.png',
        'images_cons/circle.png',
        'images_cons/diamond.png',
        'images_cons/gear.png',
        'images_cons/heart.png',
        'images_cons/moon.png',
        'images_cons/music.png',
        'images_cons/pie.png',
        'images_cons/plus.png',
        'images_cons/star.png',
        'images_cons/triangle.png',
        'images_cons/wave.png',
        'images_cons/x_box.png',
        'images_cons/question.png'];

    var preload = {
        type: 'preload',
        auto_preload: true,
        show_detailed_errors: true,
        images: images

    }
    timeline.push(preload);

    var welcome = {
        type: "html-keyboard-response",
        stimulus: "This is a placeholder."
    };
/*    timeline.push(welcome);*/

    /* multiple trials version */
/*
    var test_stimuli = {
        type: "image-keyboard-response",
        choices: ['f', 'j'],
        prompt: "<p> Press the 'F' key to choose left or the 'J' key to choose right</p>",
        timeline: [
            {stimulus: 'images_cons/arrow.png'},
            {stimulus: 'images_cons/circle.png'},
            {stimulus: 'images_cons/diamond.png'},
            {stimulus: 'images_cons/gear.png'},
            {stimulus: 'images_cons/heart.png'},
            {stimulus: 'images_cons/moon.png'},
            {stimulus: 'images_cons/music.png'},
            {stimulus: 'images_cons/pie.png'},
            {stimulus: 'images_cons/plus.png'},
            {stimulus: 'images_cons/star.png'},
            {stimulus: 'images_cons/triangle.png'},
            {stimulus: 'images_cons/wave.png'}
        ]
    };
    var fixation = {
        type: 'html-keyboard-response',
        stimulus: '<div style="font-size:60px"></div>',
        choices: jsPsych.NO_KEYS,
        trial_duration: 1000
    };
*/
 /*   var test_images = [
    {stimulus: 'images_cons/arrow.png'},
    {stimulus: 'images_cons/circle.png'},
    {stimulus: 'images_cons/diamond.png'},
    {stimulus: 'images_cons/gear.png'},
    {stimulus: 'images_cons/heart.png'},
    {stimulus: 'images_cons/moon.png'},
    {stimulus: 'images_cons/music.png'},
    {stimulus: 'images_cons/pie.png'},
    {stimulus: 'images_cons/plus.png'},
    {stimulus: 'images_cons/star.png'},
    {stimulus: 'images_cons/triangle.png'},
    {stimulus: 'images_cons/wave.png'}
    ];*/

    /* timeline variable version */
    var procedure = {
        timeline: [
            {
                type: 'html-keyboard-response',
                stimulus: '<div style="font-size:60px;">+</div>',
                choices: jsPsych.NO_KEYS,
                trial_duration: 1500
            },
            {
                type: 'html-keyboard-response',
               /* stimulus: function(){
                    var html="<img src='"+jsPsych.timelineVariable('stimulus')+"'>";
                    html += "<p>"+jsPsych.timelineVariable('stimulus')+"</p>";
                    return html;
                },*/
                stimulus: function(){
                    var html = "<img src='"+jsPsych.timelineVariable('left')+"'style=\"position:absolute;bottom:80px;left:400px;width:200px;\"'>";
                    html += "<img src='"+jsPsych.timelineVariable('right')+"' style=\"position:absolute;bottom:80px;right:400px;width:200px;\"'>";//border-style: solid *when an image is chosen
                    html += "<img src='../static/images_cons/x_box.png' style='\position:absolute;top:80px;left:250px;border-style:solid;width:150px;'>";
                    html += "<img src='../static/images_cons/x_box.png' style='\position:absolute;top:80px;left:500px;border-style:solid;width:150px;'>";
                    html += "<img src='../static/images_cons/x_box.png' style='\position:absolute;top:80px;right:500px;border-style:solid;width:150px;'>";
                    html += "<img src='../static/images_cons/question.png' style='\position:absolute;top:80px;right:250px;border-style:solid;width:150px;'>";

                    return html;
                },
                choices: ['ArrowLeft','ArrowRight'],
            },
            {
                type:"html-keyboard-response",
                stimulus: function(){
                    if (response = 'ArrowLeft'){
                        var html = "<img src='"+jsPsych.timelineVariable('left')+"'style=\"position:absolute;bottom:80px;left:400px;width:200px;border-style:solid;\"'>";
                        html += "<img src='"+jsPsych.timelineVariable('right')+"' style=\"position:absolute;bottom:80px;right:400px;width:200px;\"'>";
                        html += "<img src='../static/images_cons/x_box.png' style='\position:absolute;top:80px;left:250px;border-style:solid;width:150px;'>";
                        html += "<img src='../static/images_cons/x_box.png' style='\position:absolute;top:80px;left:500px;border-style:solid;width:150px;'>";
                        html += "<img src='../static/images_cons/x_box.png' style='\position:absolute;top:80px;right:500px;border-style:solid;width:150px;'>";
                        html += "<img src='../static/images_cons/question.png' style='\position:absolute;top:80px;right:250px;border-style:solid;width:150px;'>";
                        }
                    else {
                        var html = "<img src='"+jsPsych.timelineVariable('left')+"'style=\"position:absolute;bottom:80px;left:400px;width:200px;\"'>";
                        html += "<img src='"+jsPsych.timelineVariable('right')+"' style=\"position:absolute;bottom:80px;right:400px;width:200px;border-style:solid;\"'>";//border-style: solid *when an image is chosen
                        html += "<img src='../static/images_cons/x_box.png' style='\position:absolute;top:80px;left:250px;border-style:solid;width:150px;'>";
                        html += "<img src='../static/images_cons/x_box.png' style='\position:absolute;top:80px;left:500px;border-style:solid;width:150px;'>";
                        html += "<img src='../static/images_cons/x_box.png' style='\position:absolute;top:80px;right:500px;border-style:solid;width:150px;'>";
                        html += "<img src='../static/images_cons/question.png' style='\position:absolute;top:80px;right:250px;border-style:solid;width:150px;'>";

                    }
                    return html;
                }
            }
        ],


        /*timeline_variables: test_images,
        sample: {
            type: 'with-replacement',
            size: 10
        }*/
        timeline_variables: [
            {left: 'images_cons/arrow.png', right: 'images_cons/circle.png'},
            {left: 'images_cons/diamond.png', right: 'images_cons/gear.png'},
            {left: 'images_cons/heart.png', right: 'images_cons/moon.png'},
            {left: 'images_cons/music.png', right: 'images_cons/pie.png'},
            {left: 'images_cons/plus.png', right: 'images_cons/star.png'},
            {left: 'images_cons/triangle.png', right: 'images_cons/wave.png'},
            {left: 'images_cons/circle.png', right: 'images_cons/arrow.png'},
            {left: 'images_cons/gear.png', right: 'images_cons/diamond.png'},
            {left: 'images_cons/moon.png', right: 'images_cons/heart.png'},
            {left: 'images_cons/pie.png', right: 'images_cons/music.png'},
            {left: 'images_cons/star.png', right: 'images_cons/plus.png'},
            {left: 'images_cons/wave.png', right: 'images_cons/triangle.png'}
        ],
        sample: {
            type: 'without-replacement',
            size: 12, // 3 trials, without replacement
    }};

    timeline.push(procedure)
    jsPsych.init({
        timeline: timeline,
        on_finish: function(){
            jsPsych.data.displayData();
        }
    })



/*    jsPsych.init({
        timeline: [welcome, test_stimuli, fixation],
        on_finish: function(){
            jsPsych.data.displayData();
        }
    })*/



/*    var test = {
        type: "image-keyboard-response",
        stimulus: jsPsych.timelineVariable('stimuli'),
        choices: ["ArrowLeft", "ArrowRight"],
        prompt: '<p>Use Left and Right arrows to make choice</p>'
        data: {
            task: 'response',
            correct_response: jsPsych.timelineVariable('correct_response')
        },
        on_finish: function(data){
            data.correct = jsPsych.pluginAPI.compareKeys(data.response, data.correct_response);
        }
    }
    timeline.push({
        timeline: [test],
        timeline_variables: [
            {stimuli: "/static/images/arrow.png"},
            {stimuli: "/static/images/circle.png"},
            {stimuli: "/static/images/diamond.png"}
        ]
    });


    var fixation = {
        type: 'html-keyboard-response',
        stimulus: '<div style="font-size:60px"></div>',
        choices: jsPsych.NO_KEYS,
        trial_duration: 1000
    };
    timeline.push(fixation);

    var test_procedure = {
        timeline: [fixation, test],
        timeline_variables: test_stimuli,
        repetitions: 50,
        randomize_order: true
    }
    timeline.push(test_procedure);*/


/*    var test_procedure = {
        timeline: [
            {
                type: 'html-keyboard-response',
                stimulus: '<div style="font-size:60px"></div>',
                choices: jsPsych.NO_KEYS,
                trial_duration: 1000
            },
            {
                type: "image-keyboard-response",
                stimulus: jsPsych.timelineVariable('stimuli'),
                choices: ["ArrowLeft", "ArrowRight"]
            }
        ],
        timeline_variables: [
            {stimuli: "/static/images/arrow.png"},
            {stimuli: "/static/images/circle.png"},
            {stimuli: "/static/images/diamond.png"}
        ]
    }*/

    /* start the experiment */


/*    jsPsych.init({
        timeline: timeline,
        on_finish: function () {
            alert("The experiment has finished.");
            let saveData;
            saveData = jsPsych.data.get().ignore(['stimulus', 'trial_type', 'trial_index', 'internal_node_id']).filterCustom(function (trial) {
                return trial.key_press != null
            });
            saveData.localSave('csv', 'testdata.csv');
        }
    })*/
</script>
</html>

